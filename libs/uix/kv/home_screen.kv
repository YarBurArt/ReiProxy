#:include libs/uix/widgets/rsec.kv
#:import HttpLexer pygments.lexers.HttpLexer

<HomeScreen>
    BoxLayout:
        orientation: 'vertical'
        padding: [0, 0, 0, dp(65)]
        # Header Controls
        MDBoxLayout:
            size_hint_y: None
            height: dp(50)
            padding: dp(5)
            spacing: dp(5)
            MDIconButton:
                icon: "chevron-left"
                on_release: root.manager.current = 'auth' # tmp
            MDIconButton:
                icon: "chevron-right"
            MDButton:
                on_release: root.send_request()
                style: "filled"
                MDButtonText:
                    text: "SEND"
            Widget:
            MDButton: 
                style: "tonal"
                MDButtonText:
                    text: "RAW"
            MDButton: 
                style: "tonal"
                MDButtonText:
                    text: "FORMATTED"

        # Main Workspace - Split Vertically
        BoxLayout:
            orientation: 'horizontal'
            padding: dp(8)
            spacing: dp(8)

            # Left Section: Request (Modifiable)
            RoundedSection:
                MDLabel:
                    text: "REQUEST"
                    #font_style: "Caption"
                    size_hint_y: None
                    height: dp(20)
                CodeInput:
                    text: ""
                    style_name: 'monokai' 
                    background_color: 0,0,0,0
                    foreground_color: 1,1,1,1
                    font_name: "Roboto" 
                    lexer: HttpLexer()
                    id: req_input

            # Right Section: Response (Read Only)
            RoundedSection:
                bg_color: [0.12, 0.12, 0.12, 1]
                MDLabel:
                    text: "RESPONSE"
                    #font_style: "Caption"
                    size_hint_y: None
                    height: dp(20)
                ScrollView:
                    CodeInput:
                        id: req_output
                        text: ""
                        readonly: True
                        lexer: HttpLexer()
                        style_name: 'monokai' 
                        background_color: 0,0,0,0
                        foreground_color: 1,1,1,1
                        size_hint_y: None
                        height: self.minimum_height